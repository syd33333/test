    @Bean
    public IntegrationFlow inboundFlow() {
        String inQueueName = "IN.QUEUE"; // Incoming queue name

        return IntegrationFlows
            .from(Jms.messageDrivenChannelAdapter(cachingConnectionFactory())
                .destination(inQueueName))
            .channel("splitChannel") // Route to a common channel for splitting
            .get();
    }

    @Bean
    public IntegrationFlow outboundFlow1() {
        String outQueue1 = "OUT.QUEUE1"; // First destination queue

        return IntegrationFlows
            .from("splitChannel")
            .transform(messageTransformer::transformForQueue1) // Transform for Queue1
            .handle(Jms.outboundAdapter(cachingConnectionFactory())
                .destination(outQueue1))
            .get();
    }

    @Bean
    public IntegrationFlow outboundFlow2() {
        String outQueue2 = "OUT.QUEUE2"; // Second destination queue

        return IntegrationFlows
            .from("splitChannel")
            .transform(messageTransformer::transformForQueue2) // Transform for Queue2
            .handle(Jms.outboundAdapter(cachingConnectionFactory())
                .destination(outQueue2))
            .get();
    }
}



