@Service
public class JsonFileReaderService {

    public List<String> readJsonFilesFromResources() throws IOException {
        // Use PathMatchingResourcePatternResolver to find all .json files in json folder
        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();
        Resource[] resources = resolver.getResources("classpath:json/*.json");

        if (resources.length == 0) {
            return List.of(); // Return empty list if no JSON files found
        }

        // Read each JSON file into a string using Guava's Resources.toString
        return Arrays.stream(resources)
                .map(resource -> {
                    try {
                        // Convert Spring Resource to URL and read with Guava
                        return Resources.toString(resource.getURL(), StandardCharsets.UTF_8);
                    } catch (IOException e) {
                        throw new RuntimeException("Failed to read JSON file: " + resource.getFilename(), e);
                    }
                })
                .collect(Collectors.toList());
    }
}
